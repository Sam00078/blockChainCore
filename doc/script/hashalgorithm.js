/**
 * 哈希算法
 */



exports.hash17diamond = function( str ){

    if (str.length !== 64){
        throw new Error("hash17diamond stuff length must be 64")
    }
    let stuff = '0WTYUIAHXVMEKBSZN'
    let step = 0
    , total = 16
    , hhlen = stuff.length
    let diamond = []
    , fv = 11
    for(;step<total;step++)
    {
        let n = step * 4
        , vl = str.charAt( n ).charCodeAt()
             * str.charAt( n + 1 ).charCodeAt()
             * str.charAt( n + 2 ).charCodeAt()
             / str.charAt( n + 3 ).charCodeAt()
        fv = vl * fv % hhlen
        diamond.push( stuff.charAt(fv) )
        if(fv==0) fv = 11
    }
    return diamond.join('')
}







/*


/////////////////////////// 测试 ///////////////////////////




const bitcoin = require('bitcoinjs-lib')


// 大约一分钟
let sbase = 10000*1000, mul = 10 * 100
let step = 0, total = sbase * mul
const keybs = '9f3f363b5114f3bff8033fd464055ababcf1a3b9d0540e20541dc8b3d76d24c7'

console.log(keybs+' 共'+total/10000+'万次')

let ok_diamonds = []
, curtime = new Date().getTime()
while( step++ < total ){

    if( step==1 || step % sbase == 0 ){
        let fen = parseInt((new Date().getTime() - curtime)/1000) / 60
        let ss = parseInt(step/sbase)
        console.log( ( ss + '/' + mul + ' '+step+' ('+fen.toFixed(2)+' min used, still '+(fen/(ss/mul)-fen).toFixed(2)+' min)') )
    }

    let hex = bitcoin.crypto.sha256(Buffer.from(keybs + step))
    // console.log( hex )
    let hash = hex.toString('hex');
    // console.log( hash )

    let dddd =  exports.hash17diamond( hash )
    // console.log( dddd )

    if(1 || dddd.startsWith('00000') && dddd.endsWith('00000') && dddd.substr(5,6).indexOf('0')==-1 ) { //  
        let ssss = step +' : ' + hash + '  :  ' + dddd
        ok_diamonds.push(ssss)
        console.log(ssss )
        // loglog()
        // let fengen = parseInt((new Date().getTime() - curtime)/1000) / 60
        // console.log("单挖耗:"+(fengen/ok_diamonds.length).toFixed(2)+"min")
    }
    
}

console.log( "\n\n============== key base "+keybs+" ==============\n\n")
loglog("\n\n")
for (let i in ok_diamonds) {
    console.log(ok_diamonds[i]) // 打印全部钻石
}


// 输出统计信息
function loglog(tail=''){

    let dlen = ok_diamonds.length
    let fentotal = (parseInt((new Date().getTime() - curtime)/1000) / 60).toFixed(2)
    console.log( '已得钻石:'+dlen+"   得率:"+parseInt(total/dlen/10000)+"万一   耗时:"+fentotal+"min   单耗:"+(fentotal/dlen).toFixed(2)+"min"+tail)
    
}



*/







/*

fea3a3b624db6edd80339d60e08396dbfadc7a8e4057011e84ccba2be328eaa1:
共得钻石:21/1000000000  得率:4761万一   总耗时:93.6min   单挖耗:4.46min  
2708552   : d333343ff3ed4a6fe213b3ad0d45494109240dfe51909bc55ee5b76d72faac97  :  00000000WBVXWTVH
18061449  : 83202832028134efc32c630a98ccc40df19ba6dc1f9dff601671b2900c0c1cfa  :  00000000AUABVAHN
42240051  : fa3f33333d2414f7069596bc4a2255c25ef84e24a6d55bbfe001654fcbd608f3  :  00000000XTTHRVAT
121604075 : bf31ffbf1c6ba1966f0b3e183e76bf55a0eb2fdd34fd15e58ea9d7cb674fb005  :  00000000UEUBTANV
236812934 : f35ff53554016839c20f5c1dbb99c9f5bb1972a2dc4c6c19d8480c8002500e59  :  00000000SYXFTEMS
256441384 : 83f3ff3ff630a70d37ce63334457b83604371e46d0001fed1373eaa6819b1278  :  00000000UTRNKVSB
302425785 : f8f38ff062ce3095584d4ca7bc2303d7d5b7a041750dcde864af091d1ddea7f9  :  00000000BKFTNRYR
350782215 : fef3eff3eef5c85bed5d70cb88d0a42ebbc600224b9066a21bf875343777c95d  :  00000000NXYTHHMM
418419187 : fb33fff3ffe60b5889188a7d6badf6d82118fb1260e3f4730e84243fc3ecb71b  :  00000000BETFFMVK
443304882 : 3b333d3fd2da2a145abcc09fecc64c5a0e73ac81dd7682f94e86ee01d7beb876  :  00000000YKTSNAFX
485356916 : ff3ffff3eee20471577c702a2ad304a4ce82c675cab511754e52cb54ee0380a6  :  00000000TWYVSMSS
506467614 : 332f33ff3fe09a67e70a61e176128919b03db701ade4f0442d6623ed87d733eb  :  00000000NAMWASNX
555071104 : e3fff63363f4d91907d74f1ef1bbe2e7d69eb8f53523540d7e912cf9b811d23e  :  00000000STHSUWHV
619401806 : 8f602c3266101a603240af501462f5245fed4678443fd32e8074063cc4abbe67  :  00000000WVFVMRVX
646050690 : 4ff43334344e6b6947053f77402909d3614f95452fcb2b24b2e469a4658f7318  :  00000000AVYUFYYS
685498260 : 30ff033333d856e47470467f1ac7d26bb3686ece374176a619f87b846491870c  :  00000000YRAARASW
727834135 : 36336f3f36f92a9769d5c454463cd59dfa6331c6d8ec2844687c2ff807aea40b  :  00000000FHUABUEM
834482222 : 09f99e2fd2cd7b25f628fd4b1e3a7d8e6a8895ca70b6f17d100af04469ed1b6a  :  00000000YXNTWSXX
882435919 : 2f3334334aab75c5069873861cbc81ddfa67494b86fa312ac0f190749a1e1ebf  :  00000000BYUEASHS
953491622 : fd3334f3366ebf893ed83d65616b77acb94e3cf6fa74dca6fca4e2484fe15b9c  :  00000000KSUVBMSE
978200781 : fdff36f3636a8221be31ec664d0265d01b10566caafee300ad41258a8274a8c5  :  00000000YKWMWMNH







32903416 : 9f3f363b5114f3bff8033fd464055ababcf1a3b9d0540e20541dc8b3d76d24c7  :  0000AM0MR0SH0000
51822313 : 5ac3cdd829ad0ad3d00e241ea992a36ddbfac5d154ce4394c838038e444b3415  :  00000TTXXTT00000







9175cadcec2a7696bcc3796473c8dbf4c3ed221ec1d3dc18374fbd22f3045603 共1000000万次
49234911 : 73fcff3e1af5b341b315d25846734c732924077d23f02ef10cebf4a0ff6e0e27  :  00000EWNWEWB0000
已得钻石:1   得率:1000000万一   耗时:5.45min   单耗:5.45min
56180054 : c13ccb5176d833df32f8c79a687dff2e60c6021f1a4d518186c4887c1d0dd51f  :  0000AYKKRSXB0000
已得钻石:2   得率:500000万一   耗时:6.27min   单耗:3.13min
63698411 : a338f3087c64d93d99a1b4eb207e35807ffe9da0733ebfaf69531102e6154d67  :  0000UKNTKVSN0000
已得钻石:3   得率:333333万一   耗时:7.15min   单耗:2.38min
81518669 : df336f6d71e129ef9eee968f7b12400fd380fe6b34d30fefd20974a9858a90c0  :  0000RWMRSAHA0000
已得钻石:4   得率:250000万一   耗时:9.18min   单耗:2.29min                          0000IIIIIIII0000



9f3f363b5114f3bff8033fd464055ababcf1a3b9d0540e20541dc8b3d76d24c7 共1000000万次
2841206429 : 23571e8f29ad95826de4dd688f641cf421a15402d01dac8928612a80d5a09245  :  00000NSKIKI00000
已得钻石:1   得率:1000000万一   耗时:286.70min   单耗:286.70min


============== key base 9f3f363b5114f3bff8033fd464055ababcf1a3b9d0540e20541dc8b3d76d24c7 ==============
已得钻石:2   得率:500000万一   耗时:1068.85min   单耗:534.42min
2841206429 : 23571e8f29ad95826de4dd688f641cf421a15402d01dac8928612a80d5a09245  :  00000NSKIKI00000
9503006000 : 4f149afc50b20ffa5aeda18a762dcf6b7dc753edbbeb068e5ed6c36c294bac9b  :  00000VISUHB00000
============== key base 36336f3f36f92a9769d5c454463cd59dfa6331c6d8ec2844687c2ff807aea40b ==============
已得钻石:1   得率:1000000万一   耗时:1082.18min   单耗:1082.18min
9408390088 : 9d350e5edb02d14365d292d1ad0074510dbf4c1ea986cf82aa6a73c14509ddeb  :  00000YBUHHM00000




2841206401 : 93f526448f38db1a089b58066b11b22d1e132b44a390d3bd659a0ddadb1ceb97  :  0ZW0K0NZWYWXEHSU
2841206402 : 0098a9b6a557354a8747efa64123317e8144ee0fe006c0d9710d1f2519b02cdb  :  HNVBIXTIYT0BAXIN
2841206403 : 56ea30e7ffb6ffb1fccf580c62e0866d97423a371acff810e0f6113cfcc9360d  :  UK0NMYWZEWTHWIWY
2841206404 : af007c4dc4cd65e85f60992b64d7a4e23aeeaa9521ca42cdee87b14dbbe7bd6b  :  0WKX0AHIZKBZUISI
2841206405 : 5215362b4a638c5ee56346ffe0e3e2360e1af725be1266e9d88565cc19759d53  :  IUZYBZKVNVXVHNIH
2841206406 : 0fec695a572466d9f80d92cc227fd66ecfd6549db9541164304d28fc0e965d67  :  0YIBMZYSEXIXMIUE
2841206407 : f488fbc65ce889d85c6ddc9e4f3bdf4f1e51af81eb8232a0a0708c23d6184eb0  :  00INHTVZYIXKTA0Z
2841206408 : 84b35e46770d3a864a720b62fd0f1a271a8f5388c876f9439e9cd518d7e4d790  :  EXAMSSWXXKIUSEVZ
2841206409 : 8aac6b903512e9c5b95f96277f084ee667a22e94a1c968b66cf9cafc4aaf84e3  :  BYHBZHWVIVMSUEKI
2841206410 : 2f8f4eeb9219075b6e09f829a3a92660a98bd630fe0d3595af7c32d12011dd06  :  BYTNXUSAYUW0TMWA
2841206411 : 24163262a1fe8d7c25bcdfe65c0e70e366a88c0e4dceb4c54611cae84fe86fad  :  VNWBEWYXXMKNSABK
2841206412 : 6aac450b07306cf5e9cd3b563598433ac97cdca6d25c7c3ebb4c635937af0b22  :  SETBTNAAIIIZYBMW
2841206413 : 436f53ab83d17565abd8a1846575ddb5382b312067a0f5c6d53180818ec5bdd5  :  X0NBYKUKSEVSIAVK
2841206414 : 3cd6d21e823935d48fa83f9479a3606a2a02a2ff38e6c1884805c3258289b3c2  :  0MXBWN0ENKTZSMVM
2841206415 : 46e3db66703e45503b8973fc97379551e0c1214a80963904c1093c38c34b089c  :  UIEYUKVXVMANZZVM
2841206416 : 7aca9370b3345dd84d3bbc08b4848cc871e76ac6c68996445418f24ed523bae2  :  UKHTE0NUTEI0ZXIS
2841206417 : fcbda13371b51a53b76e593cba19c239412cc2381dc145a1967453fcc2b6858c  :  INSNTASWZUSE0TA0
2841206418 : 128d1d36669a14e75d577e6f576aee5945739ab842bd3e46528e04046ecd23ab  :  BZTWVK0YKAVVIMSY
2841206419 : 014f5b89b21ff09f545227d06ec2d18dbc3dd413b04e98f8a4c42a31ed80ba62  :  SMAZUUN0SZIYNWWM
2841206420 : d218f55de1980435495936c667df2cbb51ec388ec4bc6ab8873aa6f94bf7145f  :  ZWKIMVWABIYBBKUY
2841206421 : 32c372bf1002d7905ea01cc371f6f841eacbc781ee7fe7cb0a77dedd8d9fa617  :  NKVTVKZVYYAVNIEV
2841206422 : 99476667cfebcfcc3f5ec6aa95cea67fe04113e3d316afbdf6b22a6633fdbe8f  :  MTTBUWS0SVHZWVBX
2841206423 : 56e691ba04d12a49b29638129d8a961b0cf37faf6de1ffef4b9b8f8e09a8a161  :  KSXSVWNHEUSTHZ0Z
2841206424 : e2c390857510abeb021b096236c650480ef21559bf860715029d09cfcb2f59cf  :  WWVWEUWBKYITZNAW
2841206425 : c4adbeb419b2d45e13bc5c442a3939c700f42340366fbab4e477abd192466d9b  :  TTMEBUWWISKMYSSI
2841206426 : 9ee848fd48db93629117f4392124545bed1232af03abbac119d17d63d5d79738  :  XZKVAN00ZHK0EKVM
2841206427 : c0a797409f5c7afb5484a78a0a3017636e16aea1cb1581823b8cc3fdd9f8b0fb  :  SKMVEBKASEZM0WHW
2841206428 : 3652dde52c47ae0486c9d91e61c50b5d460b45ae4516c85b713f455b340084e2  :  ZWYZETUEBEKYIWXM
2841206429 : 2357 1e8f 29ad 9582 6de4         dd688f64 1cf421a1 5402d01d         ac89 2861 2a80 d5a0 9245  :  00000NSKIKI00000
2841206430 : c57e9463fed8149b7c0e5e93076695e92294250b20cf7445335ddce0ec2d0923  :  SESX0HTTIWTTEUX0
2841206431 : 0bd1f9301c094806500e16ab010ea469b4b908528b2fe6a2962907f16f4f17f5  :  BSHSXHZAWTSUMBHM
2841206432 : 3804f2a103a82e1e15517d27f62ea73c3854cefb0c90b1aa35914be63d697931  :  SESZXWW0HYXMEMUB
2841206433 : f7465f1b3b4af5309e05dc9eb3692a631ff0fddc40efd4824bc37c15b44e5426  :  VEYKZBZIHMZ0UHZA
2841206434 : b8a536014360f15f0b0e1ab2689650505332ee55d18bcb44086f9bfae6b74aaf  :  WHN0XVXE0TVEBEHA
2841206435 : 6dad470e2e09afcfe5ff0d3038a70211181ae0de40b0fc9706dbe7c38513f20d  :  IBZ0VUE0ZZHHYIMZ
2841206436 : 984bfc37f7f5f3139b521751faf3c349e5e12e86230e35dfd48abbf893cacb12  :  ZWZTSKNU0KYESIZS
2841206437 : 05e210ae324dab1d2108a58d042f117b2b0461debf05c48e5ee3fdb587d5cddb  :  TWIKTNSKIU0BTWYX
2841206438 : eb0a6006d9426109fefb0bb4f1891f309c0f7636a27e8147164f0e6c6f9300b8  :  UZTNEWTSAATTBNEX
2841206439 : e7a7f5e4d1577db0642619bb3251ad318a06d0524972fcdd996b21fa792961a4  :  UMKY0EW0KSZIEYTW
2841206440 : 6f0b74680feebd1d7c485c27d0fa9bf201a3812ded87f623695c31a374e91663  :  MBW0MBEMBBZWNUNH
2841206441 : 65e502dec1aa868cff7db61c981412f189a5bd2cc104bb3e42eec8c6185ea8f9  :  WBAHYNXSBBNTNTAV
2841206442 : c66d627ff80717d8c754fef96ffa4c08877a24972368207f5950e52e5454ba57  :  NBIAYUKVVWXVMAMB
2841206443 : 25f62415a7c4e464398824d458560dced214faac0d40b1766e07954025678bdd  :  ZEUEYHTBMBBZK0AI
2841206444 : 22ccc795d6a8e2015da8593a98f8be6a3209c429e90d0f63a4d8e957a3b1834d  :  ET0MMN0A0ZEAYVIZ
2841206445 : 1dd5d35fea2e93679270f7cbd56ff20ff92f6561bd42b70a4ecfd5426955147c  :  UYZAIHVKKUSESSKT
2841206446 : b569c2a4d20d23d9e0683aafad2c1dd2d7174f88122ce75e84066a6e134d6dd4  :  ZZAEAXTKIUWXNNNU
2841206447 : 644ef769591bf2c52d8643a4cd1130b0b0a591fc504625be25f142ebf985198f  :  HXBSKKSVSNKX0EVX
2841206448 : 64aadfc0ac9ed3fac63eb3d087e0523a8e2b1e5f862df185b14278b851e60a50  :  N0KSHKX0HYHEHMNI
2841206449 : 6e089b38bfe9c634604fcd59026d030eca79f6cdd57d34d9b70b4d06a114ac95  :  Z000T0YUIENU0TEU
2841206450 : f212d04832efcbd9dc1b7920a0c0817e49066d8eeef71d379b53c9a20d731130  :  00SVSYVVWYHVTWXE
2841206451 : 70ef1318ca8b1afe95fd452b7dc9870febf2cb8e4f84261419ffd556ee8703c1  :  XSAIXVKYEIKSSWTV
2841206452 : 72efb6c5eaceaa068c2ea598c25ae815846c9f814afab29cb86e6420c7fd75b2  :  NHTNIZAUHVVXXEUI
2841206453 : 851c7dc1f0126cfc5f5536cb92ce61346abd5993bd640afb3081001dd7f32785  :  VVMBSIYYZWSKVMWS
2841206454 : 49fe99afc61bf783748efe752c979959e6a6a380a217823503e5bed66b633d9a  :  S0VEWX00SEMUIZXY
2841206455 : a00531d89d91ba720a28db4bb8e7ab83400df830611560398bd8e77a783f9658  :  XUASI0KMTHKM0MVM
2841206456 : d073cf13d28e200eb2a0374af2e59646c206c9ae1a5dd012938c840d0a95c6af  :  XAMX0AYYWMBNNZBY
2841206457 : 42aa0d9544c57d15e5b94634090d21c4d5987d367831cbb2552a070a488343e9  :  ANVUHZYUNBVXKUIT
2841206458 : 877a31f5c77359b28aa09ad4622cd94fb47f4df6aa4f13e95cfb2b0f2d4dbbbe  :  0X00BMXSYYVTZINA
2841206459 : affebe499943b99301a477eb30467c355c70a59910c02795b8aa943459a5879f  :  AKZZSXVETIMMWE0W
2841206460 : 8defd30fdf7e1b74e9ba78901bdfaf7ee3667a9aad14fcfa2cfa8e68d4436064  :  0WM0XMTAVUV0BXVY
2841206461 : cea2ac5d34711678a0913b6038e617bf117ad5895f3d30c70c6887056872bc9d  :  ESZXHUXEMVYSMTVA






*/



//////////////////////// 测试结束 ////////////////////////